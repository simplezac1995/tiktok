{extend name="base" /}
{block name="body"}

<body>
<div class="ok-body">
	<!--form表单-->
	<form class="layui-form ok-form" lay-filter="formFilter">
		<input type="hidden" name="id" />
		
		<div class="layui-form-item">
			<label class="layui-form-label">用户名</label>
			<div class="layui-input-block">
				<input type="text" name="user_name" placeholder="请输入用户名" autocomplete="off" class="layui-input" lay-verify="required">
			</div>
		</div>
		<div class="layui-form-item">
			<label class="layui-form-label">密码</label>
			<div class="layui-input-block">
				<input type="text" name="password" placeholder="请输入密码,修改时不输入密码则保持原密码不变" autocomplete="off" class="layui-input">
			</div>
		</div>
		
		<div class="layui-form-item">
			<label class="layui-form-label">姓名</label>
			<div class="layui-input-block">
				<input type="text" name="name" placeholder="请输入真实姓名" autocomplete="off" class="layui-input" lay-verify="required">
			</div>
		</div>
		<div class="layui-form-item">
			<label class="layui-form-label">邮箱</label>
			<div class="layui-input-block">
				<input type="text" name="email" placeholder="请输入邮箱" autocomplete="off" class="layui-input" lay-verify="email">
			</div>
		</div>
		
		<div class="layui-form-item">
			<label class="layui-form-label">角色</label>
			<div class="layui-input-block">
				<select name="role_id" lay-verify="required" lay-search>
					<option value="">请选择</option>
				</select>
			</div>
		</div>
		
		<div class="layui-form-item">
			<label class="layui-form-label">状态</label>
			<div class="layui-input-block">
				<input type="checkbox" name="status" lay-skin="switch" lay-text="启用|停用" checked value="1">
			</div>
		</div>

		<div class="layui-form-item">
			<div class="layui-input-block">
				<button class="layui-btn" lay-submit lay-filter="save">立即提交</button>
				<button type="reset" class="layui-btn layui-btn-primary">重置</button>
			</div>
		</div>
	</form>
</div>

<script>
formPageInit({
	afterPageInit:function(){
		layui.jquery("input[name=password]").val("");
		
		let okUtils = layui.okUtils;
		let $ = layui.jquery;
		
		okUtils.ajax("/index/getRoles","post",{},true).done(function(res){
			  var html = '<option value="">请选择</option>';
			  res.data.forEach(function(row){
				  html+='<option value="'+row.value+'">'+row.name+'</option>';
			  });
			  
			  $("select[name=role_id]").html(html);
			  $("select[name=role_id]").val(_formData.role_id);
			  layui.form.render('select');
	  	})
	}
})
</script>
</body>
{/block}